<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Bixi</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <!-- bixi references -->
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/default.js"></script>
</head>

<body>

    <h1>Hello world</h1>
    <div id="mapDiv"></div>

    <div id="ajax"></div>

    <div id="output"></div>
    <!--<div id="xhrOutput">
    </div>-->

    <script src="/js/jquery.js"></script>
    <!-- Bing Map Control references -->
    <script type="text/javascript" src="ms-appx:///Bing.Maps.JavaScript//js/veapicore.js"></script>
    <script type="text/javascript" src="ms-appx:///Bing.Maps.JavaScript//js/veapimodules.js"></script>
    <script>

        /**Microsoft.Maps.loadModule('Microsoft.Maps.Map', { callback: initMap, culture: 'en-us', homeRegion: 'US' });
        function initMap() {
            var map;

            var mapOptions =
            {
                credentials: "AnXgHQGJ5mSb2ihUcAEype1aEeCF-F9PCI4QQz5zrbCdg4ZbiHf2vfJSVAOIsS_f"
            };

            map = new Microsoft.Maps.Map(document.getElementById("mapDiv"), mapOptions);

            map.setView({
                center: new Microsoft.Maps.Location(43.6387, -79.3859),
                mapTypeId: Microsoft.Maps.MapTypeId.road,
                zoom: 14
            });

            //get the location
            Location1 = new Microsoft.Maps.Location(43.66207, -79.37617);

            //init the pin for the first location right on toronto
            var pushpin = new Microsoft.Maps.Pushpin(Location1, null);
            map.entities.push(pushpin);

            //get the second location
            Location2 = new Microsoft.Maps.Location(43.6636, -79.380);

            var pushpin = new Microsoft.Maps.Pushpin(Location2, null);
            map.entities.push(pushpin);
        }**/

        var info = document.getElementById("ajax");
        info.style.color = "white";

        WinJS.xhr({ url: "https://toronto.bixi.com/data/bikeStations.xml", responseType: "responseXML" })
        .done(
            function complete(result) {
                var xml = result.responseXML;

                info.innerText = "Downloaded the page";
                info.style.backgroundColor = "#00FF00"; //here goes my breakpoint to check response value

                txt = "";
                items = xml.querySelectorAll("station");

                for (var i = 0; i < items.length; i++) {
                    txt = txt + items[i].querySelector("name").textContent + "<br>";
                }

                document.getElementById("output").innerHTML = txt;
            },
            function error(result) {
                info.innerHTML = "Got error: " + result.statusText;
                info.style.backgroundColor = "#FF0000";
            },
            function progress(result) {
                info.innerText = "Ready state is " + result.readyState;
                info.style.backgroundColor = "#0000FF";
            }
        );

        /**for (var i = 0; i < items.length; i++) {
            var data = {};
            data.name = items[i].querySelector("name").textContent;
        }**/
   </script>

</body>

</html>